<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="HttpFileSender_8java" kind="file">
    <compoundname>HttpFileSender.java</compoundname>
    <innerclass refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpFileSender" prot="public">com::qualoutdoor::recorder::network::HttpFileSender</innerclass>
    <innernamespace refid="namespacecom_1_1qualoutdoor_1_1recorder_1_1network">com::qualoutdoor::recorder::network</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="keyword">package<sp/></highlight><highlight class="normal">com.qualoutdoor.recorder.network;</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.io.IOException;</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.io.InputStream;</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.io.OutputStream;</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.io.OutputStreamWriter;</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.io.PrintWriter;</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.net.HttpURLConnection;</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.net.MalformedURLException;</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.net.URL;</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>android.util.Log;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>*<sp/>Classe<sp/>fille<sp/>de<sp/>Sender<sp/>propre<sp/>au<sp/>transfert<sp/>de<sp/>type<sp/>HTTP</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>*<sp/></highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>*<sp/>Cette<sp/>classe<sp/>r�unit<sp/>les<sp/>param�tres<sp/>sp�cifiques<sp/>�<sp/>un<sp/>transfert<sp/>d&apos;information<sp/>de<sp/>type<sp/>http</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*<sp/>et<sp/>les<sp/>m�thodes<sp/>pour<sp/>r�aliser<sp/>ce<sp/>transfert</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*<sp/></highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/>*<sp/>Une<sp/>connexion<sp/>HTTP<sp/>est<sp/>ind�pendante<sp/>des<sp/>transferts<sp/>qu&apos;elle<sp/>met<sp/>en<sp/>oeuvre<sp/>ainsi<sp/>on<sp/>d�finit</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*<sp/>diff�rentes<sp/>m�thodes<sp/>correspondant<sp/>�<sp/>des<sp/>actions<sp/>�l�mentaires<sp/>qui<sp/>seront<sp/>ensuites<sp/>reprises</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*<sp/>dans<sp/>la<sp/>fonction<sp/>envoyerFichier</highlight></codeline>
<codeline lineno="22"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24" refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpFileSender" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpFileSender" kindref="compound">HttpFileSender</ref><sp/></highlight><highlight class="keyword">implements</highlight><highlight class="normal"><sp/><ref refid="interfacecom_1_1qualoutdoor_1_1recorder_1_1network_1_1Sender" kindref="compound">Sender</ref>{</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//PARAMETRES<sp/>PROPRES<sp/>A<sp/>UNE<sp/>CONNEXION<sp/>HTTP:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>String<sp/>fileFieldName;</highlight><highlight class="comment">//nom<sp/>du<sp/>champs<sp/>auquel<sp/>se<sp/>rapporte<sp/>le<sp/>fichier<sp/>transferer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*La<sp/>pr�sence<sp/>de<sp/>ce<sp/>param�tre<sp/>peut<sp/>s&apos;averer<sp/>problematique<sp/>en<sp/>effet<sp/>elle<sp/>cr�e<sp/>une<sp/>relation</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>�troite<sp/>entre<sp/>l&apos;envoi<sp/>d&apos;un<sp/>fichier<sp/>particulier<sp/>et<sp/>une<sp/>instance<sp/>de<sp/>HttpFileSender</highlight></codeline>
<codeline lineno="30"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>alors<sp/>qu&apos;une<sp/>m�me<sp/>instance<sp/>pourrait<sp/>�tre<sp/>utilis�<sp/>pour<sp/>l&apos;envoi<sp/>de<sp/>plusieurs<sp/>fichiers</highlight></codeline>
<codeline lineno="31"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/></highlight></codeline>
<codeline lineno="32"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/>La<sp/>valeur<sp/>du<sp/>champs<sp/>n&apos;a<sp/>pas<sp/>une<sp/>importance<sp/>consid�rable,<sp/>ainsi<sp/>dans<sp/>le<sp/>cas<sp/>o�<sp/>l&apos;on<sp/>souhairait</highlight></codeline>
<codeline lineno="33"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/>mettre<sp/>fin<sp/>�<sp/>cette<sp/>d�pendance<sp/>on<sp/>supprimera<sp/>cet<sp/>attribut<sp/>et<sp/>on<sp/>laissera<sp/>�<sp/>la<sp/>fonction<sp/>UploadFile</highlight></codeline>
<codeline lineno="34"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/>le<sp/>soin<sp/>de<sp/>fixer<sp/>le<sp/>nom<sp/>du<sp/>champ</highlight></codeline>
<codeline lineno="35"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*ATTENTION:<sp/>ces<sp/>param�tres<sp/>ne<sp/>sont<sp/>pas<sp/>sp�cifique<sp/>aux<sp/>transferts<sp/>http<sp/>mais<sp/>ils<sp/>permettent<sp/>d&apos;associer</highlight></codeline>
<codeline lineno="38"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>une<sp/>instance<sp/>HttpFileSender<sp/>avec<sp/>une<sp/>communication<sp/>donn�e<sp/>et<sp/>de<sp/>limiter<sp/>le<sp/>nombre<sp/>d&apos;arguments<sp/></highlight></codeline>
<codeline lineno="39"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>des<sp/>fonctions<sp/>de<sp/>la<sp/>classe</highlight></codeline>
<codeline lineno="40"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/></highlight></codeline>
<codeline lineno="41"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>Avec<sp/>cette<sp/>implementation<sp/>il<sp/>faut<sp/>voir<sp/>une<sp/>instance<sp/>comme<sp/>un<sp/>dialogue<sp/>entre<sp/>client<sp/>et<sp/>serveur</highlight></codeline>
<codeline lineno="42"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>dans<sp/>lequel<sp/>circulent<sp/>plusieurs<sp/>types<sp/>de<sp/>donn�es*/</highlight><highlight class="normal"><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>HttpURLConnection<sp/>connection;</highlight><highlight class="comment">//la<sp/>connexion<sp/>correspondant<sp/>au<sp/>dialogue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>String<sp/>delimiter;</highlight><highlight class="comment">//chaine<sp/>de<sp/>caract�re<sp/>delimitant<sp/>les<sp/>entr�es<sp/>du<sp/>formulaire</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>OutputStream<sp/>os;</highlight><highlight class="comment">//output<sp/>stream<sp/>permettant<sp/>d&apos;�crire<sp/>dans<sp/>le<sp/>contenu<sp/>de<sp/>la<sp/>requete</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>PrintWriter<sp/>writer;</highlight><highlight class="comment">//outil<sp/>issu<sp/>de<sp/>os<sp/>qui<sp/>va<sp/>nous<sp/>permettre<sp/>d&apos;ecrire<sp/>des<sp/>octets<sp/>dans<sp/>la<sp/>requete</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*Constructeur<sp/>pertinant<sp/>si<sp/>on<sp/>associe<sp/>la<sp/>connexion<sp/>�<sp/>un<sp/>envoi<sp/>simple<sp/>d&apos;un<sp/>fichier</highlight></codeline>
<codeline lineno="49"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*Les<sp/>autres<sp/>attributs<sp/>sont<sp/>fix�s<sp/>avec<sp/>la<sp/>m�thode<sp/>initialize.</highlight></codeline>
<codeline lineno="50"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpFileSender" kindref="compound">HttpFileSender</ref>(String<sp/>fileFieldName)<sp/>{</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.fileFieldName<sp/>=<sp/>fileFieldName;</highlight><highlight class="comment">//on<sp/>fixe<sp/>donc<sp/>le<sp/>nom<sp/>du<sp/>champs<sp/>correspond<sp/>au<sp/>fichier<sp/>�<sp/>envoyer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*Implementation<sp/>de<sp/>la<sp/>m�thode<sp/>envoyerFichier</highlight></codeline>
<codeline lineno="57"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/></highlight></codeline>
<codeline lineno="58"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>les<sp/>param�tres<sp/>sont<sp/>donc<sp/>les<sp/>informations<sp/>necessaires<sp/>communes</highlight></codeline>
<codeline lineno="59"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>la<sp/>m�thode<sp/>fera<sp/>donc<sp/>appel<sp/>aux<sp/>fonctions<sp/>d�finies<sp/>si<sp/>dessous.</highlight></codeline>
<codeline lineno="60"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/></highlight></codeline>
<codeline lineno="61"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/></highlight></codeline>
<codeline lineno="62"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/>@Override</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/>sendFile(String<sp/>url,String<sp/>fileName,InputStream<sp/>content){</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.initialize(url);</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.UploadTextFile(this.fileFieldName,fileName,content);</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.endSending();</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>this.readResponseStatus();</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">catch</highlight><highlight class="normal">(<ref refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpTransfertException" kindref="compound">HttpTransfertException</ref><sp/>e){</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">catch</highlight><highlight class="normal">(IOException<sp/>e){</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>initialize(String<sp/>url)<sp/></highlight><highlight class="keywordflow">throws</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpTransfertException" kindref="compound">HttpTransfertException</ref>{</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*fonction<sp/>qui<sp/>permet<sp/>l&apos;initialisation<sp/>d&apos;une<sp/>requete<sp/>HTTP<sp/>post<sp/>�<sp/>partir<sp/>d&apos;une<sp/>URL<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="80"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*cette<sp/>fonction<sp/>permet<sp/>de<sp/>construire<sp/>l&apos;entete<sp/>de<sp/>la<sp/>requete<sp/>HTTP<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="81"><highlight class="comment"><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;DEBUG&quot;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&quot;...begining<sp/>initialisation&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>construit<sp/>l&apos;url<sp/>�<sp/>partir<sp/>de<sp/>l&apos;adresse<sp/>pass�e<sp/>en<sp/>param�tre</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>URL<sp/>targetAddress<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>URL(url);</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//ouverture<sp/>de<sp/>la<sp/>connection<sp/>vers<sp/>l&apos;addresse<sp/>indiqu�e</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.connection<sp/>=<sp/>(HttpURLConnection)<sp/>targetAddress.openConnection();</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>pr�cise<sp/>le<sp/>type<sp/>de<sp/>la<sp/>requ�te</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.connection.setRequestMethod(</highlight><highlight class="stringliteral">&quot;POST&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>autorise<sp/>les<sp/>flux<sp/>entrants<sp/>dans<sp/>la<sp/>connexion:<sp/>pour<sp/>pouvoir<sp/>�crire<sp/>les<sp/>informations</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.connection.setDoInput(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>autotise<sp/>les<sp/>flux<sp/>sortant<sp/>de<sp/>la<sp/>connexion:<sp/>pour<sp/>pouvoir<sp/>lire<sp/>les<sp/>informations</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.connection.setDoOutput(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>rend<sp/>la<sp/>connection<sp/>TCP<sp/>sous<sp/>jacente<sp/>persistente</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.connection.setRequestProperty(</highlight><highlight class="stringliteral">&quot;Connection&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Keep-Alive&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>g�n�re<sp/>un<sp/>d�limiteur</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.delimiter<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;******&quot;</highlight><highlight class="normal">+Long.toString(System.currentTimeMillis())+</highlight><highlight class="stringliteral">&quot;******&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>pr�cise<sp/>le<sp/>format<sp/>de<sp/>la<sp/>parti�<sp/>donn�es<sp/>de<sp/>la<sp/>requete</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.connection.setRequestProperty(</highlight><highlight class="stringliteral">&quot;Content-type&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;multipart/form-data;<sp/>boundary=&quot;</highlight><highlight class="normal">+this.delimiter);</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>�tablit<sp/>la<sp/>connexion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.connection.connect();</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>cr�e<sp/>un<sp/>acces<sp/>pour<sp/>�crire<sp/>dans<sp/>la<sp/>requ�te<sp/>via<sp/>un<sp/>output<sp/>stream</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.os<sp/>=<sp/>connection.getOutputStream();</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>d�finit<sp/>le<sp/>writer<sp/>associ�<sp/>�<sp/>l&apos;output<sp/>stream<sp/>qui<sp/>permettra<sp/>d&apos;�crire<sp/>les<sp/>octects<sp/>dans<sp/>le<sp/>flux</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>PrintWriter(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>OutputStreamWriter(os,<sp/></highlight><highlight class="stringliteral">&quot;UTF-8&quot;</highlight><highlight class="normal">),<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;DEBUG&quot;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&quot;...initialisation<sp/>complete...trying<sp/>to<sp/>send<sp/>post<sp/>request<sp/>to&quot;</highlight><highlight class="normal">+url);<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">catch</highlight><highlight class="normal">(MalformedURLException<sp/>e){</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;URL<sp/>exception&quot;</highlight><highlight class="normal">,e.toString());</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>e.printStackTrace();</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpTransfertException" kindref="compound">HttpTransfertException</ref>(</highlight><highlight class="stringliteral">&quot;URL<sp/>exception&quot;</highlight><highlight class="normal">+e.toString());</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">catch</highlight><highlight class="normal">(IOException<sp/>e){</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;initialize<sp/>IO<sp/>Exception&quot;</highlight><highlight class="normal">,<sp/>e.toString());</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>e.printStackTrace();</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpTransfertException" kindref="compound">HttpTransfertException</ref>(</highlight><highlight class="stringliteral">&quot;initialize<sp/>IO<sp/>Exception<sp/>:&quot;</highlight><highlight class="normal">+e.toString());</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>SendSimpleInput(String<sp/>fieldName,<sp/>String<sp/>val){</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*cette<sp/>fonction<sp/>permet<sp/>d&apos;inserer<sp/>un<sp/>champ<sp/>�l�mentaire<sp/>dans<sp/>le<sp/>formulaire<sp/>�<sp/>envoyer</highlight></codeline>
<codeline lineno="121"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*un<sp/>input<sp/>fieldName<sp/>sera<sp/>donc<sp/>cr�e,<sp/>comportant<sp/>la<sp/>valeur<sp/>val</highlight></codeline>
<codeline lineno="122"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cette<sp/>fonction<sp/>ne<sp/>sera<sp/>appel�<sp/>que<sp/>sur<sp/>un<sp/>sender<sp/>initialis�.</highlight></codeline>
<codeline lineno="123"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;DEBUG&quot;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&quot;...trying<sp/>to<sp/>write<sp/>input&quot;</highlight><highlight class="normal"><sp/>+<sp/>fieldName<sp/>+</highlight><highlight class="stringliteral">&quot;<sp/>in<sp/>request&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>indique<sp/>une<sp/>nouvelle<sp/>entr�e<sp/>du<sp/>formulaire<sp/>dans<sp/>la<sp/>requete<sp/>avec<sp/>une<sp/>limite</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.append(</highlight><highlight class="stringliteral">&quot;--&quot;</highlight><highlight class="normal">+this.delimiter+</highlight><highlight class="stringliteral">&quot;\r\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>indique<sp/>une<sp/>entr�e<sp/>du<sp/>formulaire<sp/>se<sp/>rapportant<sp/>au<sp/>champ<sp/>s&apos;appelant<sp/>fieldName</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.append(</highlight><highlight class="stringliteral">&quot;Content-Disposition:<sp/>form-data;<sp/>name=\&quot;&quot;</highlight><highlight class="normal">+fieldName+</highlight><highlight class="stringliteral">&quot;\&quot;\r\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>indique<sp/>le<sp/>format<sp/>de<sp/>la<sp/>valeur<sp/>du<sp/>champ<sp/>:<sp/>ici<sp/>texte<sp/>encod�<sp/>avec<sp/>UTF8</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.append(</highlight><highlight class="stringliteral">&quot;Content-Type:<sp/>text/plain;<sp/>charset=UTF-8\r\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>indique<sp/>la<sp/>valeur<sp/>que<sp/>l&apos;on<sp/>affecte<sp/>au<sp/>champ</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.append(</highlight><highlight class="stringliteral">&quot;\r\n&quot;</highlight><highlight class="normal"><sp/>+<sp/>val<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;\r\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>�crit<sp/>le<sp/>flux<sp/>dans<sp/>la<sp/>requete</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.flush();</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;DEBUG&quot;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&quot;...input<sp/>writen&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>UploadTextFile(String<sp/>fieldName,<sp/>String<sp/>fileName,InputStream<sp/>content)</highlight><highlight class="keywordflow">throws</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpTransfertException" kindref="compound">HttpTransfertException</ref>{</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*cette<sp/>fonction<sp/>permet<sp/>d&apos;inserer<sp/>un<sp/>fichier<sp/>texte<sp/>dans<sp/>le<sp/>formulaire<sp/>�<sp/>envoyer</highlight></codeline>
<codeline lineno="141"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*un<sp/>input<sp/>appel�<sp/>filedName<sp/>sera<sp/>cr�e<sp/>et<sp/>affect�<sp/>�<sp/>un<sp/>fichier<sp/>fileName<sp/>dont<sp/>le<sp/>contenu<sp/></highlight></codeline>
<codeline lineno="142"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*sera<sp/>r�cupr�rer<sp/>par<sp/>la<sp/>lecture<sp/>de<sp/>content</highlight></codeline>
<codeline lineno="143"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*cette<sp/>fonction<sp/>ne<sp/>sera<sp/>appel�<sp/>que<sp/>sur<sp/>un<sp/>sender<sp/>initialis�.</highlight></codeline>
<codeline lineno="144"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;DEBUG&quot;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&quot;...trying<sp/>to<sp/>write<sp/>file&quot;</highlight><highlight class="normal"><sp/>+<sp/>fileName<sp/>+</highlight><highlight class="stringliteral">&quot;<sp/>in<sp/>request&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;DEBUG&quot;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&quot;delimiter:<sp/>&quot;</highlight><highlight class="normal">+this.delimiter);</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>indique<sp/>une<sp/>nouvelle<sp/>entr�e<sp/>du<sp/>formulaire<sp/>dans<sp/>la<sp/>requete<sp/>avec<sp/>une<sp/>limite</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.append(</highlight><highlight class="stringliteral">&quot;--&quot;</highlight><highlight class="normal">+this.delimiter+</highlight><highlight class="stringliteral">&quot;\r\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>indique<sp/>une<sp/>entr�e<sp/>du<sp/>formulaire<sp/>se<sp/>rapportant<sp/>au<sp/>champ<sp/>s&apos;appelant<sp/>nomChamp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.append(</highlight><highlight class="stringliteral">&quot;Content-Disposition:<sp/>form-data;<sp/>name=\&quot;&quot;</highlight><highlight class="normal"><sp/>+<sp/>fieldName+<sp/></highlight><highlight class="stringliteral">&quot;\&quot;;<sp/>filename=\&quot;&quot;</highlight><highlight class="normal"><sp/>+<sp/>fileName+<sp/></highlight><highlight class="stringliteral">&quot;\&quot;\r\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>indique<sp/>que<sp/>le<sp/>contenu<sp/>correspond<sp/>�<sp/>du<sp/>texte</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.append(</highlight><highlight class="stringliteral">&quot;Content-Type:<sp/>text/plain\r\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>indique<sp/>comment<sp/>sera<sp/>encod�<sp/>le<sp/>texte<sp/>pour<sp/>la<sp/>transmission</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.append(</highlight><highlight class="stringliteral">&quot;Content-Transfer-Encoding:<sp/>binary\r\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.append(</highlight><highlight class="stringliteral">&quot;\r\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>�crit<sp/>le<sp/>flux<sp/>dans<sp/>la<sp/>requete</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.flush();</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*il<sp/>faut<sp/>maintenant<sp/>remplir<sp/>la<sp/>requ�te<sp/>avec<sp/>le<sp/>contenu<sp/>du<sp/>fichier</highlight></codeline>
<codeline lineno="161"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*on<sp/>met<sp/>en<sp/>place<sp/>un<sp/>syst�me<sp/>de<sp/>lecture<sp/>�criture</highlight></codeline>
<codeline lineno="162"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*on<sp/>definit<sp/>un<sp/>buffer<sp/>intermediaire<sp/>pour<sp/>transvaser<sp/>les<sp/>donn�es</highlight></codeline>
<codeline lineno="163"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte[]<sp/>temp<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>byte[1024];</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//indicateur<sp/>permettant<sp/>de<sp/>savoir<sp/>si<sp/>la<sp/>lecture<sp/>du<sp/>fichier<sp/>est<sp/>termin�e</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>indic;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">((indic<sp/>=<sp/>content.read(temp))<sp/>!=<sp/>-1){</highlight><highlight class="comment">//on<sp/>lit<sp/>le<sp/>flux<sp/>entrant<sp/>dans<sp/>le<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.write(temp,<sp/>0,<sp/>indic);</highlight><highlight class="comment">//on<sp/>�crit<sp/>le<sp/>buffer<sp/>dans<sp/>le<sp/>flux<sp/>sortant</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.append(</highlight><highlight class="stringliteral">&quot;\r\n&quot;</highlight><highlight class="normal">);<sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">catch</highlight><highlight class="normal">(IOException<sp/>e){</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;Uploading<sp/>text<sp/>IO<sp/>Exception&quot;</highlight><highlight class="normal">,<sp/>e.toString());</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>e.printStackTrace();</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpTransfertException" kindref="compound">HttpTransfertException</ref>(</highlight><highlight class="stringliteral">&quot;Uploading<sp/>text<sp/>reading-writing<sp/>mecanisme<sp/>exception<sp/>:&quot;</highlight><highlight class="normal">+e.toString());</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>endSending()</highlight><highlight class="keywordflow">throws</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpTransfertException" kindref="compound">HttpTransfertException</ref>{</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*fonction<sp/>qui<sp/>permet<sp/>de<sp/>clore<sp/>le<sp/>champ<sp/>data<sp/>de<sp/>la<sp/>requete</highlight></codeline>
<codeline lineno="182"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>une<sp/>fois<sp/>que<sp/>tous<sp/>les<sp/>champs<sp/>ont<sp/>�t�<sp/>inscrits<sp/>dedans</highlight></codeline>
<codeline lineno="183"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>on<sp/>aura<sp/>donc<sp/>achev�<sp/>de<sp/>remplir<sp/>la<sp/>requ�te<sp/>qui<sp/>sera<sp/>donc<sp/></highlight></codeline>
<codeline lineno="184"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>communiqu�e<sp/>�<sp/>l&apos;adresse<sp/>cible.<sp/></highlight></codeline>
<codeline lineno="185"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;DEBUG&quot;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&quot;...ending<sp/>request&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>inscrit<sp/>le<sp/>d�limiteur<sp/>final<sp/>dans<sp/>la<sp/>requete.<sp/>cette<sp/>ligne<sp/>signifie<sp/>au<sp/>server<sp/>la<sp/>fin<sp/>de<sp/>la<sp/>requete</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.append(</highlight><highlight class="stringliteral">&quot;--&quot;</highlight><highlight class="normal">+this.delimiter+</highlight><highlight class="stringliteral">&quot;--&quot;</highlight><highlight class="normal">+</highlight><highlight class="stringliteral">&quot;\r\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>�crit<sp/>le<sp/>flux<sp/>dans<sp/>la<sp/>requete</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.flush();<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//on<sp/>ferme<sp/>tous<sp/>les<sp/>outils<sp/>d&apos;�criture</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.writer.close();</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this.os.close();</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;DEBUG&quot;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&quot;...request<sp/>ended&quot;</highlight><highlight class="normal">);<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">catch</highlight><highlight class="normal">(IOException<sp/>e){</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Log.d(</highlight><highlight class="stringliteral">&quot;end<sp/>sending<sp/>IO<sp/>Exception&quot;</highlight><highlight class="normal">,<sp/>e.toString());</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>e.printStackTrace();</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1qualoutdoor_1_1recorder_1_1network_1_1HttpTransfertException" kindref="compound">HttpTransfertException</ref>(</highlight><highlight class="stringliteral">&quot;end<sp/>sending<sp/>closing<sp/>outputstream<sp/>exception<sp/>:&quot;</highlight><highlight class="normal">+e.toString());</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*fonction<sp/>qui<sp/>indique<sp/>si<sp/>le<sp/>transfert<sp/>s&apos;est<sp/>bien<sp/>droul /
<sp/><sp/><sp/><sp/>public<sp/>boolean<sp/>readResponseStatus()<sp/>throws<sp/>IOException{
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int<sp/>response<sp/>=<sp/>this.connection.getResponseCode();
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>(response==HttpURLConnection.HTTP_OK);
<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>
<sp/><sp/><sp/><sp/><sp/><sp/><sp/>}
<sp/><sp/>
<sp/><sp/><sp/>
<sp/><sp/><sp/>
<sp/><sp/><sp/>
<sp/><sp/><sp/>
<sp/><sp/><sp/>

}
*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/>readResponseStatus()<sp/></highlight><highlight class="keywordflow">throws</highlight><highlight class="normal"><sp/>IOException{</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>response<sp/>=<sp/>this.connection.getResponseCode();</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(response==HttpURLConnection.HTTP_OK);</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/home/nicolas/Programmation/android-workspace/QualOutdoor-Recorder/src/com/qualoutdoor/recorder/network/HttpFileSender.java"/>
  </compounddef>
</doxygen>
